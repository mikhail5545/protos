syntax = "proto3";

package proto.product_service.physical.v1;

import "product_service/product/v1/product.proto";
import "product_service/variant/v1/variant.proto";

import "google/protobuf/field_mask.proto";

option go_package = "github.com/mikhail5545/protos/gen/go/product_service/physical/v1;physicalpbv1";

message CreateRequest{
  string title = 1;
  optional string slug = 2;
  optional string subtitle = 3;
  string short_description = 4;
  repeated string tags = 5;
  bytes admin_uuid = 6;
  string admin_name = 7;
  string note = 8;
}

message CreateResponse{
  product.v1.Product product = 1;
}

message UpdateRequest{
  bytes uuid = 1;
  optional string title = 2;
  optional string slug = 3;
  bool regenerate_slug = 4;
  optional string subtitle = 5;
  optional string description = 6;
  optional string short_description = 7;
  repeated string tags = 8;
  optional string metadata = 9;
  optional string meta_title = 10;
  optional string meta_description = 11;
  optional google.protobuf.FieldMask updates = 12;
}

message UpdateResponse{
  bytes uuid = 1;
  optional string title = 2;
  optional string slug = 3;
  optional string subtitle = 4;
  optional string description = 5;
  optional string short_description = 6;
  repeated string tags = 7;
  optional string metadata = 8;
  optional string meta_title = 9;
  optional string meta_description = 10;
  optional google.protobuf.FieldMask updates = 11;
}

message CreateVariantRequest{
  bytes product_uuid = 1;
  string title = 2;
  optional string sku = 3;

  int32 inventory_quantity = 4;

  int32 weight_gram = 5;
  string hs_code = 6;

  optional string option1 = 7;
  optional string option2 = 8;
  optional string option3 = 9;

  bytes admin_uuid = 10;
  string admin_name = 11;
  string note = 12;
}

message CreateVariantResponse{
  variant.v1.Variant variant = 1;
}

message UpdateVariantRequest{
  bytes uuid = 1;
  bytes product_uuid = 14;
  optional string title = 2;
  optional string sku = 3;
  bool regenerate_sku = 4;

  optional int32 inventory_quantity = 5;
  optional variant.v1.VariantInventoryPolicy inventory_policy = 12;
  optional bool allow_backorder = 13;

  optional int32 weight_gram = 6;
  optional string hs_code = 7;

  optional string option1 = 8;
  optional string option2 = 9;
  optional string option3 = 10;

  optional google.protobuf.FieldMask updates = 11;
}

message UpdateVariantResponse{
  bytes uuid = 1;
  optional string title = 2;
  optional string sku = 3;

  optional int32 inventory_quantity = 4;
  optional variant.v1.VariantInventoryPolicy inventory_policy = 11;
  optional bool allow_backorder = 12;

  optional int32 weight_gram = 5;
  optional string hs_code = 6;

  optional string option1 = 7;
  optional string option2 = 8;
  optional string option3 = 9;

  optional google.protobuf.FieldMask updates = 10;
}

message PublishRequest {
  bytes uuid = 1;
  optional string note = 2;
  bytes admin_uuid = 3;
  string admin_name = 4;
}

message PublishResponse {}

message PingRequest {}

message PingResponse {
  int64 timestamp = 1;
}

service PhysicalService{
  rpc Ping(PingRequest) returns (PingResponse);
  rpc Create(CreateRequest) returns (CreateResponse);
  rpc Update(UpdateRequest) returns (UpdateResponse);
  rpc CreateVariant(CreateVariantRequest) returns (CreateVariantResponse);
  rpc UpdateVariant(UpdateVariantRequest) returns (UpdateVariantResponse);
  rpc Publish(PublishRequest) returns (PublishResponse);
}