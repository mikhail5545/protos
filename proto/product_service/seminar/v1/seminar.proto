syntax = "proto3";

package proto.product_service.seminar.v1;

import "proto/product_service/product/v1/product.proto";
import "proto/product_service/variant/v1/variant.proto";

import "google/protobuf/timestamp.proto";
import "google/protobuf/field_mask.proto";

option go_package = "github.com/mikhail5545/protos/gen/go/product_service/seminar/v1;seminarpbv1";

message CreateRequest{
  string title = 1;
  optional string slug = 2;
  optional string subtitle = 3;
  string short_description = 4;
  repeated string tags = 5;

  optional google.protobuf.Timestamp event_starts_at = 6;
  optional google.protobuf.Timestamp event_ends_at = 7;
  string venue = 8;
  int32 max_seats = 9;
  string timezone = 10;
  bytes admin_uuid = 11;
  string admin_name = 12;
  string note = 13;
}

message CreateResponse{
  product.v1.Product product = 1;
}

message UpdateRequest{
  bytes uuid = 1;
  optional string title = 2;
  optional string slug = 3;
  bool regenerate_slug = 4;
  optional string subtitle = 5;
  optional string description = 6;
  optional string short_description = 7;
  repeated string tags = 8;

  optional google.protobuf.Timestamp event_starts_at = 9;
  optional google.protobuf.Timestamp event_ends_at = 10;
  optional string venue = 11;
  optional int32 max_seats = 12;
  optional string timezone = 13;

  optional string meta_title = 14;
  optional string meta_description = 15;
  optional string metadata = 16;
  optional google.protobuf.FieldMask updates = 17;
}

message UpdateResponse{
  bytes uuid = 1;
  optional string title = 2;
  optional string slug = 3;
  optional string subtitle = 4;
  optional string description = 5;
  optional string short_description = 6;
  repeated string tags = 7;

  optional google.protobuf.Timestamp event_starts_at = 8;
  optional google.protobuf.Timestamp event_ends_at = 9;
  optional string venue = 10;
  optional int32 max_seats = 11;
  optional string timezone = 12;

  optional string meta_title = 13;
  optional string meta_description = 14;
  optional string metadata = 15;
  optional google.protobuf.FieldMask updates = 16;
}

message CreateVariantRequest{
  bytes product_uuid = 1;
  string title = 2;
  optional string sku = 3;

  optional string option1 = 4;
  optional string option2 = 5;
  optional string option3 = 6;

  optional google.protobuf.Timestamp available_from = 7;
  optional google.protobuf.Timestamp available_to = 8;
  optional int32 max_seats = 9;

  optional bool is_surcharge = 10;
  optional bytes base_variant_uuid = 11;

  bytes admin_uuid = 12;
  string admin_name = 13;
  string note = 14;
}

message CreateVariantResponse{
  variant.v1.Variant variant = 1;
}

message UpdateVariantRequest{
  bytes variant_uuid = 1;
  bytes product_uuid = 2;
  optional string title = 3;
  optional string sku = 4;
  bool regenerate_sku = 5;

  optional variant.v1.VariantInventoryPolicy inventory_policy = 6;
  optional bool allow_backorder = 7;

  optional string option1 = 8;
  optional string option2 = 9;
  optional string option3 = 10;

  optional google.protobuf.Timestamp available_from = 11;
  optional google.protobuf.Timestamp available_to = 12;
  optional int32 max_seats = 13;

  optional bool is_surcharge = 14;
  optional bytes base_variant_uuid = 15;

  optional google.protobuf.FieldMask updates = 16;
}

message UpdateVariantResponse{
  bytes variant_uuid = 1;
  bytes product_uuid = 2;
  optional string title = 3;
  optional string sku = 4;

  optional variant.v1.VariantInventoryPolicy inventory_policy = 5;
  optional bool allow_backorder = 6;

  optional string option1 = 7;
  optional string option2 = 8;
  optional string option3 = 9;

  optional google.protobuf.Timestamp available_from = 10;
  optional google.protobuf.Timestamp available_to = 11;
  optional int32 max_seats = 12;

  optional bool is_surcharge = 13;
  optional bytes base_variant_uuid = 14;

  optional google.protobuf.FieldMask updates = 15;
}

message PublishRequest{
  bytes uuid = 1;
  bytes admin_uuid = 2;
  string admin_name = 3;
  string note = 4;
}

message PublishResponse {}

message PingRequest {}

message PingResponse {
  int64 timestamp = 1;
}

service SeminarService{
  rpc Ping(PingRequest) returns (PingResponse);
  rpc Create(CreateRequest) returns (CreateResponse);
  rpc Update(UpdateRequest) returns (UpdateResponse);
  rpc CreateVariant(CreateVariantRequest) returns (CreateVariantResponse);
  rpc UpdateVariant(UpdateVariantRequest) returns (UpdateVariantResponse);
  rpc Publish(PublishRequest) returns (PublishResponse);
}